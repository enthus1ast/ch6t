// Generated by CoffeeScript 1.11.1
(function() {
  document.addEventListener('DOMContentLoaded', function() {
    var main, server, serverOutput;
    server = myLayout.root.getItemsById('server')[0];
    serverOutput = server.element[0].querySelector('.output');
    main = function(server, user, nick) {
      window.connection = new WebSocket('ws://' + server, ['irc']);
      connection.onopen = function() {
        connection.send('USER ' + user + ' * * *\n');
        connection.send('NICK ' + nick + '\n');
        connection.send('PONG :t\n');
        return connection.send('join #lobby\n');
      };
      return connection.onmessage = function(event) {
        var div, pongReply;
        console.log('Server: ' + event.data);
        div = document.createElement('div');
        div.innerText = event.data;
        serverOutput.appendChild(div);
        if (event.data.startsWith("PING")) {
          console.log("send pong reply");
          pongReply = "PONG" + event.data.slice(4) + "\n";
          return connection.send(pongReply);
        }
      };
    };
    return main("127.0.0.1:7787", "asd", "astoll");
  });

}).call(this);
